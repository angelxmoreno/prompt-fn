"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[4046],{7639(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"examples/support-ticket","title":"support-ticket","description":"*","source":"@site/docs/examples/support-ticket.md","sourceDirName":"examples","slug":"/examples/support-ticket","permalink":"/docs/examples/support-ticket","draft":false,"unlisted":false,"editUrl":"https://github.com/angelxmoreno/prompt-fn/edit/main/docs-site/docs/examples/support-ticket.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"product-brief","permalink":"/docs/examples/product-brief"},"next":{"title":"API Reference","permalink":"/docs/category/api-reference"}}');var s=n(4848),r=n(8453);const o={},l=void 0,a={},c=[{value:"id: support-ticket\nsidebar_position: 1\ntitle: Support ticket triage",id:"id-support-ticketsidebar_position-1title-support-ticket-triage",level:2},{value:"Why it is interesting",id:"why-it-is-interesting",level:3},{value:"Try it locally",id:"try-it-locally",level:3}];function p(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"id-support-ticketsidebar_position-1title-support-ticket-triage",children:"id: support-ticket\nsidebar_position: 1\ntitle: Support ticket triage"}),"\n",(0,s.jsxs)(t.p,{children:["This example mirrors ",(0,s.jsx)(t.a,{href:"https://github.com/angelxmoreno/prompt-fn/blob/main/examples/support-ticket.ts",children:(0,s.jsx)(t.code,{children:"examples/support-ticket.ts"})}),". It classifies inbound emails and assigns a priority."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",metastring:'title="examples/support-ticket.ts"',children:"import {definePrompt} from 'prompt-fn';\nimport {z} from 'zod';\nimport {google} from '@ai-sdk/google';\n\nconst classifyTicket = definePrompt({\n  name: 'Support Ticket',\n  description: 'Classify support tickets by intent and urgency',\n  inputSchema: z.object({\n    subject: z.string(),\n    body: z.string(),\n  }),\n  outputSchema: z.object({\n    intent: z.enum(['bug', 'billing', 'question']),\n    priority: z.enum(['low', 'normal', 'urgent']),\n    summary: z.string(),\n  }),\n  template: ({subject, body}) => `Summarize and classify\\nSubject: ${subject}\\nBody: ${body}`,\n  model: google('models/gemini-1.5-flash'),\n});\n\nconst response = await classifyTicket({\n  subject: 'Refund not received',\n  body: 'I cancelled last week and still have not seen the refund.',\n});\n"})}),"\n",(0,s.jsx)(t.h3,{id:"why-it-is-interesting",children:"Why it is interesting"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Demonstrates string templates with interpolated variables."}),"\n",(0,s.jsx)(t.li,{children:"Shows how logger + recovery keep the response usable even when Gemini or Ollama return quoted JSON."}),"\n",(0,s.jsxs)(t.li,{children:["Input/output types are inferred, so ",(0,s.jsx)(t.code,{children:"response.priority"})," narrows to ",(0,s.jsx)(t.code,{children:"'low' | 'normal' | 'urgent'"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"try-it-locally",children:"Try it locally"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'bun test test/integration/integration.test.ts --filter "Using Google Gemini"\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Set ",(0,s.jsx)(t.code,{children:"GOOGLE_GENERATIVE_AI_API_KEY"})," before running. See ",(0,s.jsx)(t.a,{href:"https://github.com/angelxmoreno/prompt-fn/blob/main/test/integration/integration.test.ts",children:(0,s.jsx)(t.code,{children:"test/integration/integration.test.ts"})})," for the env variable guards."]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>l});var i=n(6540);const s={},r=i.createContext(s);function o(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);